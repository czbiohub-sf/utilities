functionality:
  name: "process_10x_auto"
  namespace: "mapping"
  authors:
    - name: Angela Pisco
      roles: [ author ]
      props: { github: aopisco, orcid: "0000-0003-0142-2355" }
    - name: Robrecht Cannoodt
      email: robrecht@data-intuitive.com
      roles: [ author, maintainer ]
      props: { github: rcannood, orcid: "0000-0003-3641-729X" }
  argument_groups:
    - name: Fastq inputs
      arguments:
        - type: file
          name: --input_dir
          required: true
          example: [ "sample_S1_L001_R1_001.fastq.gz", "sample_S1_L001_R2_001.fastq.gz" ]
          description: A directory containing one or more 10X samples
        - type: string
          name: --fastq_regex
          default: "(.*)_S[0-9]*_L[0-9]*_R[12]_001.fastq.gz"
          description: The regex used to match the fastq files. Anything between parentheses is assumed to be the sample id.
        - type: string
          name: --sample_id_replacement
          default: "$1"
          description: |
            Which groups from the fastq regex to use as the sample ID. 
            For example, if the `fastq_regex` has two groups which are relevant 
            for the constructing the sample ID, the value for this parameter should
            probably be `$1$2`.
    - name: Reference
      arguments:
        - type: file
          name: --reference
          required: true
          description: The path to Cell Ranger reference tar.gz file.
          example: reference.tar.gz
    - name: Output
      arguments:
        - type: string
          name: --output_raw
          default: '${sample_id}_raw'
          description: Which template to use to define raw output directories.
        - type: string
          name: --output_h5mu
          default: '${sample_id}.h5mu'
          description: Which template to use to define h5mu output directories.
        - type: string
          name: --params_yaml
          default: param_list.yaml
          description: The filename for the param list yaml.
    - name: Operational arguments
      arguments:
        - type: boolean_true
          name: --dry_run
          description: If passed, will only generate the param_list.yaml file.
        - name: "--id"
          type: string
          description: Dummy id. Will be removed in the future.
          default: auto_run
  resources:
    - type: nextflow_script
      path: main.nf
      entrypoint: auto
  # test_resources:
  #   - type: nextflow_script
  #     path: main.nf
  #     entrypoint: test_wf
platforms:
  - type: nextflow